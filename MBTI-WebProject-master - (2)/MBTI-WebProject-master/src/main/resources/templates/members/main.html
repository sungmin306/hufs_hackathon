<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

</head>
<body style="margin:0px;">
    <article class="ques">
        <div class="frame">
            <div class="wrap">
                <div class="question">
                    <h1 id="title">Q1</h1>
                    <input id="type" type="hidden" value="1">
                    <h3>취미생활</h3>
                    <p id="explain">다음 중 가장 선호하는 운동은?</p>
                    <button id="A">구기</button>
                    <button id="B">수영</button>
                    <button id="C">스키,보드</button>
                    <button id="D">자전거, 달리기 등</button>
                    <button id="E">해당사항 없음</button>
                    <div class="progress">
                        <div class="progress-bar bg-info" role="progressbar" style="width: calc(100/5*1%)" ></div>
                      </div>
                </div>
            </div>
        </div>
    </article>
    <article class="go">
        <div class="frame">
            <div class="wrap">
                <div class="question" style="clip-path: polygon(0 6%,20% 10%,65% 0,100% 5%,100% 90%,86% 100%,54% 97%,25% 100%,0 97%,0 70%); padding: 24px 0; width: 500px;">
                    <p>두구두구!</p>
                    <p>과연 결과가 어떻게 나왔을까요?</p>
                    <p>얼른 아래 버튼을 눌러 결과를 보러 가주세요!</p>
                    <form action="/members/update" method="post">
                        <button type="submit">
                            결과창 보러가기
                        </button>
                        <input type="hidden" name="name" th:value="${data}"/>
                        <input type="hidden" name="res" value=""/>
                    </form>
                </div>
            </div>
        </div>
    </article>
   <!-- <article class="go">
        <form action="/members/update" method="post">
            <button class="test_button" type="submit">
                결과창 보러가기
            </button>
            <input type="text" name="name" th:value="${data}"/>
            <input type="text" name="res" value=""/>
        </form>
    </article>&ndash;&gt;-->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        var n = 1;
        var num = 2;
        let res = [];
        let req='';
        var q = {
            1: {"title":"Q1" ,"type": "1", "explain":"다음 중 가장 선호하는 운동은?", "type": "on","A":"구기", "B":"수영","C":"스키,보드","D":"자전거, 달리기 등","E":"해당사항 없음 "},
            2: {"title":"Q2" ,"type": "2", "explain":"다음 중 가장 선호하는 예술장르는?", "type": "on","A":"음악", "B":"조형물(조각상, 그림)","C":"행위(발레, 체조 등)","D":"미디어(영화, 영상)","E":"해당사항 없음 "},
            3: {"title":"Q3" ,"type": "3", "explain":"다음 중 가장 선호하는 음악장르는?", "type": "on","A":"클래식", "B":"힙합","C":"발라드, 팝송","D":"트로트","E":"해당사항 없음 "},
            4: {"title":"Q4" ,"type": "4", "explain":"다음 중 가장 선호하는 취미는?", "type": "on","A":"다이어리 꾸미기", "B":"보석, 십자수","C":"뜨개질","D":"요리","E":"해당사항 없음 "},
            5: {"title":"Q5" ,"type": "5", "explain":"다음 중 가장 선호하는 악기는?", "type": "on","A":"현악기", "B":"관악기","C":"타악기","D":"전자악기","E":"해당사항 없음 ",}
        }
        $("#A").click(function(){
            // console.log($("#type").val());
            // var type = $("#type").val();
            // var preValue = $("#"+type).val();
            // $("#"+type).val(parseInt(preValue)+1);
            // console.log(parseInt(preValue)+1);
            res.push(String(n)+'A');
            console.log(res);
            next();
        });
        $("#B").click(function(){
            res.push(String(n)+'B');
            console.log(res);
            next();
        });
        $("#C").click(function(){
            res.push(String(n)+'C');
            console.log(res);
            next();
        });
        $("#D").click(function(){
            res.push(String(n)+'D');
            console.log(res);
            next();
        });
        $("#E").click(function(){
            res.push(String(n)+'E');
            console.log(res);
            next();
        });
        function next() {
            if (num==6){
                $(".ques").hide();
                $(".go").show();
                var i = 1;
                for (i=0;i<5;i++){
                    req+=res[i];
                    req+=' ';
                }
                console.log(req);
                $('input[name=res]').attr('value',req);
            }
            else {
                $(".progress-bar").attr('style', 'width: calc(100/5*'+num+'%)');
                $("#title").html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#explain").html(q[num]["explain"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
                $("#C").html(q[num]["C"]);
                $("#D").html(q[num]["D"]);
                $("#E").html(q[num]["E"]);
                num++;
                n++;
            }
        };
        function show(){
            $(".ques").hide();
            $(".result").show();
            console.log(req)
        }
        
    </script>
</body>
</html>
<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="/css/result.css">
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
<body style="margin:0px;">
<article class ="result">  <!-- 이부분이 결과 보여주는 html 부분-->
    <div class="frame">
        <div class="wrap">
            <div class="question">
                <h4 id="header">당신의 mbti은 : </h4>
                <h2 id="fir_mbti" style="margin-bottom: 20px;"></h2>
                <p style="margin-bottom: 30px;"><p id ="sec_mbti" style="display:inline-block;">ENFP</p> 유형을 가지는 사람들 중 가장 선호하는 결과입니다.</p>

                <div class="genre">
                    <div id="cate1" style="float:right;">구기</div>
                    <h5 id="show" style="text-align: left;">운동</h5>
                    <div class="progress">
                        <div class="progress-bar bg-info" id="fir_per" role="progressbar" style="width: calc(100/5*1)" ></div>
                    </div>
                </div>

                <div class="genre">
                    <div id="cate2" style="float:right;">음악</div>
                    <h5 id="show" style="text-align: left;">예술장르</h5>
                    <div class="progress">
                        <div class="progress-bar bg-warning" id="sec_per" role="progressbar" style="width: calc(100/5*1%)"></div>
                    </div>
                </div>

                <div class="genre">
                    <div id="cate3" style="float:right;">클래식</div>
                    <h5 id="show" style="text-align: left;">음악장르</h5>
                    <div class="progress">
                        <div class="progress-bar bg-success" id="thr_per" role="progressbar" style="width: calc(100/5*1%)"></div>
                    </div>
                </div>

                <div class="genre">
                    <div id="cate4" style="float:right;">다이어리 꾸미기</div>
                    <h5 id="show" style="text-align: left;">취미</h5>
                    <div class="progress">
                        <div class="progress-bar bg-danger" id="fo_per" role="progressbar" style="width: calc(100/5*1%)"></div>
                    </div>
                </div>

                <div class="genre">
                    <div id="cate5" style="float:right;">현악기</div>
                    <h5 id="show" style="text-align: left;">악기</h5>
                    <div class="progress">
                        <div class="progress-bar bg-secondary" id="fi_per" role="progressbar" style="width: calc(100/5*1%)"></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</article>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script th:inline="javascript">


    let mbti_name=[[${members.name}]];
    var new_mbti = document.getElementById("fir_mbti");
    new_mbti.innerHTML = mbti_name;
    var new_mbti = document.getElementById("sec_mbti");
    new_mbti.innerHTML = mbti_name;

    let fir_name=[[${members.res1}]];
    var name1 = document.getElementById("cate1");
    name1.innerHTML = fir_name;

    let sec_name=[[${members.res2}]];
    var name2 = document.getElementById("cate2");
    name2.innerHTML = sec_name;

    let thr_name=[[${members.res3}]];
    var name3 = document.getElementById("cate3");
    name3.innerHTML = thr_name;

    let fo_name=[[${members.res4}]];
    var name4 = document.getElementById("cate4");
    name4.innerHTML = fo_name;

    let fif_name=[[${members.res5}]];
    var name5 = document.getElementById("cate5");
    name5.innerHTML = fif_name;
    //값 변환
    let sum_people = [[${members.sequence}]]; // mbti별 설문조사 전체인원
    let value1=[[${members.res1Long}]];  //값 순서대로 변수에 저장
    let value2=[[${members.res2Long}]];
    let value3=[[${members.res3Long}]];
    let value4=[[${members.res4Long}]];
    let value5=[[${members.res5Long}]];

    var new_value1=document.getElementById("fir_per");
    new_value1.innerHTML=String(Math.floor(value1/sum_people*100))+"%";
    $("#fir_per").attr('style', 'width: calc(100/'+sum_people+'*'+value1+'%)');

    var new_value2=document.getElementById("sec_per");
    new_value2.innerHTML=String(Math.floor(value2/sum_people*100))+"%";
    $("#sec_per").attr('style', 'width: calc(100/'+sum_people+'*'+value2+'%)');


    var new_value3=document.getElementById("thr_per");
    new_value3.innerHTML=String(Math.floor(value3/sum_people*100))+"%";
    $("#thr_per").attr('style', 'width: calc(100/'+sum_people+'*'+value3+'%)');

    var new_value4=document.getElementById("fo_per");
    new_value4.innerHTML=String(Math.floor(value4/sum_people*100))+"%";
    $("#fo_per").attr('style', 'width: calc(100/'+sum_people+'*'+value4+'%)');

    var new_value5=document.getElementById("fi_per");
    new_value5.innerHTML=String(Math.floor(value5/sum_people*100))+"%";
    $("#fi_per").attr('style', 'width: calc(100/'+sum_people+'*'+value5+'%)');



    //document.write(new_mbti.innerText);


</script>
</body>
</html>
